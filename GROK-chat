// Backend code: backend/xaiChat.jsw
import {fetch} from 'wix-fetch';
import {getSecret} from 'wix-secrets-backend';
export async function sendMessageToXAI(message) {
const apiKey = await getSecret('XAI_API_KEY');
const url = 'https://api.x.ai/v1/chat/completions';
const body = {
model: 'grok-4-latest',
messages: [{role: 'user', content: message}]
};
const options = {
method: 'POST',
headers: {
'Content-Type': 'application/json',
'Authorization': Bearer ${apiKey},
body: JSON.stringify(body)
};
return fetch(url, options)
.then(response => response.json())
.then(data => data.choices[0].message.content);
}
// Frontend code: page code
import {sendMessageToXAI} from 'backend/xaiChat';
$w.onReady(function () {
$w('#sendButton').onClick(async () => {
const userInput = $w('#inputBox').value;
const response = await sendMessageToXAI(userInput);
$w('#responseText').text = response;
});
});
